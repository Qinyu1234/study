<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body style="height: 2000px">
<!--模拟body-->
<div class="warp">
    <!--头部-->
    <div class="header">
        <!--上边-->
        <div class="top">
            <!--头部主题框心朗-->
            <div class="topMain">
                <!--欢迎 登录注册-->
                <div class="login">
                    <p>欢迎来到尚品汇！ 请</p>
                    <p class="loginBtn">
                        <a href="##" class="btn1">登录</a>
                        <a href="##">注册</a>
                    </p>

                </div>
                <!--右侧导航栏-->
                <div class="topNav">
                    <a href="##">我的订单</a>
                    <a href="##">我的购物车</a>
                    <a href="##">我的尚品汇</a>
                    <a href="##">尚品汇会员</a>
                    <a href="##">企业采购</a>
                    <a href="##">关注尚品汇</a>
                    <a href="##">合作招商</a>
                    <a href="##">商家后台</a>

                </div>
            </div>

        </div>
        <!--下部分-->
        <div class="bottom">
            <!--框心栏-->
            <div class="bottomMain">
                <!--logo-->
                <div class="logo">
                    <h1>
                        <a href="##">
                            <img src="images/Logo.png">
                        </a>
                    </h1>
                </div>
                <!--搜索框-->
                <div class="search">
                    <input type="text">
                    <button>搜索</button>
                </div>
            </div>
        </div>
    </div>
    <!--分类导航-->
    <div class="typeNav">
        <div class="navmain">
            <h3>全部商品分类</h3>
            <div>
                <a href="##">服装城</a>
                <a href="##">美妆馆</a>
                <a href="##">商品会超市</a>
                <a href="##">全球购</a>
                <a href="##">闪购</a>
                <a href="##">团购</a>
                <a href="##">有趣</a>
                <a href="##">秒杀</a>
            </div>
        </div>
    </div>
    <!--商品详情内容区-->
    <div class="main">
        <div class="maincon"><!--框心-->
            <!--路径导航-->
            <div class="conPoin">
               <!-- <a href="##">手机、数码、通信</a>
                <i>/</i>
                <a href="##">手机</a>
                <i>/</i>
                <a href="##">Apple苹果</a>
                <i>/</i>
                <a>iphone 1000S系类</a>-->

            </div>
            <!--图片内容区域-->
            <div class="infoWrap">
                <!--图片内容区框心-->
                <div class="previwWrap">
                    <!--图片容器 previw放大镜  左侧-->
                    <div class="previw">
                        <!--有图片本身  图片的放大镜小框  放大图片框-->
                        <div class="zoomImgBox">
                            <!--小图片-->
                            <img src="images/s1.png" alt="">
                        </div>
                    </div>
                    <!--缩略图thumbnail  有左右的按钮 中间小图区域 小图区域有一个宽盒子装多个图片溢出隐藏-->
                    <div class="thumbnail">
                        <!--a表示按钮-->
                        <a href="##" class="prev">&lt;</a>
                        <!--中间小图片容器区域-->
                        <div class="itemWrap">
                            <!--图片多个  根据数据库返回结果创建img 有几个结果返回创建几个img-->
                            <ul>
                                <li>
                                    <img src="images/s1.png" alt="">
                                </li>
                                <li>
                                    <img src="images/s2.png" alt="">
                                </li>
                                <li>
                                    <img src="images/s3.png" alt="">
                                </li>
                                <li>
                                    <img src="images/s1.png" alt="">
                                </li>
                                <li>
                                    <img src="images/s2.png" alt="">
                                </li>
                                <li>
                                    <img src="images/s3.png" alt="">
                                </li>
                                <li>
                                    <img src="images/s1.png" alt="">
                                </li>
                                <li>
                                    <img src="images/s2.png" alt="">
                                </li>
                                <li>
                                    <img src="images/s3.png" alt="">
                                </li>
                                <li>
                                    <img src="images/s1.png" alt="">
                                </li>
                                <li>
                                    <img src="images/s2.png" alt="">
                                </li>
                                <li>
                                    <img src="images/s3.png" alt="">
                                </li>
                            </ul>
                        </div>
                        <a href="##" class="next">&gt;</a>
                    </div>
                    <!--右边的内容区-->

                </div>
            </div>
        </div>
    </div>

</div>
<!--引入数据js文件-->
<script src="js/data.js"></script>
<script>
    window.onload=function () {
        //路径导航地址
        conPoin();
        function conPoin() {
            //获取class为conPoin
            conPoinNode=document.querySelector('.warp .main .maincon .conPoin');
            //定义一个变量  将数据js文件中数组进行赋值
            var path=goodData.path;//将数组赋值给path
            //遍历数组  给每一个索引增加一个a标签和i   最后一个a标签不增加href i
            for (let i=0;i<path.length;i++ ){
                //创建一个a标签
                var aNode=document.createElement('a');
                if (i===path.length-1){
                    //进入判断  证明是最后一个a  此时只增加标签  不增加href i标签
                    aNode.innerHTML=path[i].title;//将数组中的title赋值给a标签内部
                    conPoinNode.appendChild(aNode);//新建的a标签增加进conPoin中
                }else {
                    aNode.innerHTML=path[i].title;
                    aNode.href=path[i].url;//设置a标签的href
                    conPoinNode.appendChild(aNode);
                    let iNode=document.createElement('i');//新建i标签
                    iNode.innerHTML='/';//i标签的内部
                    conPoinNode.appendChild(iNode);
                }
            }

        }
        //放大镜
        //当鼠标移入zoomImgBox 新增一个div  鼠标要保持在div中位置不变 鼠标离开 div消失
        //右侧要出现一个大div  里面放img标签
        //创建一个鼠标移入事件
        previw();
        function previw() {
            //获取到父元素
            var previw=document.querySelector('.warp .main .maincon .infoWrap .previwWrap .previw');
            var zoomImgBox=document.querySelector('.warp .main .maincon .infoWrap .previwWrap .previw .zoomImgBox');
            //创建一个蒙版小div
            var maskNode=null;
            //创建一个大div装img的容器
            var bigDivNode=null;
            //创建一个img放图片
            var imgNode=null;
            //绑定一个鼠标移入事件
            previw.onmouseenter=function () {
            //判断是否是小div  大div  如果没有创建
                if (!maskNode){
                    //创建小图
                    maskNode=document.createElement('div');
                    maskNode.className='mask';
                    zoomImgBox.appendChild(maskNode);

                    //创建大图
                    bigDivNode=document.createElement('div');
                    bigDivNode.className='bigDiv';
                    previw.appendChild(bigDivNode);
                    imgNode=document.createElement('img');
                    imgNode.src='./images/b1.png';
                    bigDivNode.appendChild(imgNode);
                }
            }
            //鼠标移入zoomImgBox事件  蒙图跟着鼠标移动
            //1.蒙图跟着鼠标移动
            //2.鼠标按下的坐标保持不变
            zoomImgBox.onmousemove=function(event){
                //兼容低版本浏览器
                event=event || window.event;
                //创建2个变量  获取鼠标移动的坐标  鼠标距离视口的坐标x-元素距离视口的left-蒙图自身宽度的一般
                //getBoundingClientRect().left  可以获取元素距离视口最干净的距离  不受其他元素的影响
                var left=event.clientX-previw.getBoundingClientRect().left-maskNode.offsetWidth/2;
                var top=event.clientY-previw.getBoundingClientRect().top-maskNode.offsetHeight/2;
                //判断盒子是否超出previw盒子
                if (left<0){
                    left=0;
                }else if(left>previw.clientWidth-maskNode.offsetWidth){
                    left=previw.clientWidth-maskNode.offsetWidth;
                }
                if (top<0){
                    top=0;
                }else if (top>previw.clientHeight-maskNode.offsetHeight){
                    top=previw.clientHeight-maskNode.offsetHeight;
                }
                //设置蒙图maskNode的偏移量
                maskNode.style.left=left+'px';
                maskNode.style.top=top+'px';
                //接下来修改大div中根据蒙图的位置移动  小div400宽度  大div800宽度
                //计算移动的倍数  小div的可移动区域/大div的可移动区域
                var scale=(previw.clientWidth-maskNode.offsetWidth)/(imgNode.offsetWidth-bigDivNode.clientWidth);
                //console.log(scale);
                //大div偏移量
                imgNode.style.left=-left/scale+'px';
                imgNode.style.top=-top/scale+'px';
            }
            //鼠标离开  删除小div  大div  img标签  清除移入事件
            previw.onmouseleave=function () {
                zoomImgBox.removeChild(maskNode);
                previw.removeChild(bigDivNode);
                //删除元素后重置蒙图为空
                maskNode=null;
                bigDivNode=null;
                imgNode=null;
                zoomImgBox.onmousemove = null;
                previw.onmouseleave = null;

            }
        }
        //缩略图
        itemWrap();
        function itemWrap() {
            var prevNode = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail a.prev');
            var nextNode = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail a.next');
//          图片容器     为了控制这个ul的left值
            var list = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail .itemWrap ul');
//          获取li集合
            var items = document.querySelectorAll('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail .itemWrap ul li');
//          移动图片张数
            var moveNum = 2;
//          定义默认显示张数
            var showImg = 5;
//          每次移动两张小图     计算单次的偏移量
//          显示图片的张数 * （ 图片的宽度 + 一个图片的marginRight）
            var moveLeft = (items[0].offsetWidth + 20) * moveNum;
            console.log(moveLeft);
//          计算一共可以移动的距离  （总张数 - 显示张数） * （图片宽 + marginRight）
            var countLeft = (items.length - showImg) * (items[0].offsetWidth + 20);
//          需要定义一个变量  记录已经移动的距离
            var tempLeft = 0;
//          给next按钮 绑定单击事件
            nextNode.onclick = function () {
//              如果已经走过的距离 小于总共可以走的距离 才能移动
                if(tempLeft < countLeft){
//                  总距离 - 已经移动的距离 = 剩余距离
//                  每一次的移动 都是用剩余距离和单次偏移左比较  如果剩余距离大于单次偏移 则正常移动 如果不大于 剩多少走多少
                    if(countLeft - tempLeft > moveLeft){
                        tempLeft += moveLeft;
                    }else{
//                        如果能够进入到这个else当中 说明当前的剩余空间 不够走一个moveLeft 直接走剩余部分
                        tempLeft = countLeft;
                    }
//                  需要给list设置left的值为负值  才能够让容器向左移动 看到右侧的图片
                    list.style.left = -tempLeft + 'px';
                }
            }
//          给prev按钮绑定单击事件
            prevNode.onclick = function () {
//              点击右侧按钮记录的已经移动的距离 对于prev按钮来说 就是可移动的空间
                if(tempLeft > 0){
//                   能够进入这个if当中 则说明当前左侧还有剩余的空间 可以移动
                    if(tempLeft > moveLeft){
                        tempLeft -= moveLeft;
                    }else{
                        tempLeft = 0;
                    }
//                    list的left值  永远都为赋值 最大为0  如果出现正值  那么ul左侧一定出现留白了 所以不可能
                    list.style.left = -tempLeft + 'px';
                }
            }

        }
    }
</script>

</body>
</html>